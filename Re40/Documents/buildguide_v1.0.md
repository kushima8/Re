# Re40 rev1.0 ビルドガイド
## はじめに
このたびはご購入いただきありがとうございます。<br>
本製品は組み立てが必要なキットです。<br>

Re40は親指で操作可能なロータリーエンコーダーを備える40％分割キーボードです。<br>
使用するキーキャップについては[キーレイアウト](http://www.keyboard-layout-editor.com/##@@=Esc&=Q&=W&=E&=R&=T&_x:3.25%3B&=Y&=U&=I&=O&=P&=Back%0A%0A%0A%0A%0A%0ASpace%3B&@=Tab%0A%0A%0A%0A%0A%0AControl&=A&=S&=D&=F&=G&_x:3.25%3B&=H&=J&=K&=L&=%2F:%0A%2F%3B&=%22%0A'%3B&@=Shift&=Z&=X&=C&=V&=B&_x:3.25%3B&=N&=M&=%3C%0A,&=%3E%0A.&=%3F%0A%2F%2F&=Shift%3B&@_x:3&w:1.5%3B&=RAISE&_w:1.5%3B&=Space&_x:3.25&w:1.5%3B&=Enter&_w:1.5%3B&=LOWER%3B&@_y:-0.75&x:6%3B&=TENKEY&_x:1.25%3B&=SECOND)を確認してください。<br>
※中央付近に突き出した1Uはロータリーエンコーダーのブッシュスイッチを表しています。<br>

ファームウェアに[qmk_firmware](https://github.com/qmk/qmk_firmware)を採用しています。<br>
QMKにRe40のコードはまだマージされていませんのでこの[ブランチ](https://github.com/kushima8/qmk_firmware/tree/re)を使用してください。<br>
動作確認の為にdefaultの[HEXファイル](https://github.com/kushima8/Re/blob/master/Re40/HEX/re40_default.hex)を用意しています。<br>
defaultを使用した場合、左側のPro MicroとPCを接続する設定となっております。<br>

キット作成前にPro Microの書き込み環境の構築を行ってください。<br>
ファームウェアの書き込み環境の構築については下記のサリチル酸さんのサイトを参考にしてください。<br>
[（初心者編）自作キーボードにファームウェアを書き込む](https://salicylic-acid3.hatenablog.com/entry/qmk-toolbox)

キー割り当ての変更方法などはご自身でお調べいただくようお願いします。<br>

GUIから簡単にキー割り当てを変更できるVIAに対応しております。<br>
しかし、ロータリーエンコーダーの設定がVIA上での変更に対応していませんので、<br>
当キットを使う上では十全ではないのであまりオススメはしません。<br>
VIAについては下記のサリチル酸さんのサイトを参考にしてください。<br>
[（初心者編）VIAを使ってキーマップを書き換えよう](https://salicylic-acid3.hatenablog.com/entry/via-manual)

以下の部品リストを参考に欠品がないか確認をお願いします。<br>

## 部品

### キットに付属しているもの

|名称|数量|備考|
|----|:---:|----|
|PCB|2枚|右側用、左側用各1枚ずつ|
|トッププレート|2枚|右側用、左側用各1枚ずつ|
|ボトムプレート|2枚|右側用、左側用各1枚ずつ|
|保護プレート|4本|内側用、外側用各2枚ずつ|
|M2 3mmスペーサー(ARB-2003E)|10個|
|M2 6mmスペーサー(ARB-2006E)|12個|
|M2 8mmスペーサー(ARB-2008E)|6個|
|M2 4mmネジ|20本|
|M2 8mmネジ|10本|
|M2 12mmネジ|2本|
|ダイオード(1N4148)|42本|若干多めの場合あり|
|Kailh PCB ソケット(MX用)|40個|
|タクトスイッチ|2個|
|TRRSジャック(MJ-4PP-9)|2個|
|プッシュスイッチ内蔵ロータリーエンコーダ(PEC12R-4222F-S0024)|2個|
|ゴム足|8個|

### 別途、購入が必ず必要なもの
以下の部品は別途購入してください。

|名称|数量|備考|
|----|:---:|----|
|キースイッチ(Cherry MX互換)|40個|
|キーキャップ(Cherry MX互換)|40個|
|Pro Micro|2個|
|コンスルーピンヘッダ	|4個|
|ロータリーエンコーダー用ノブ|2個|
|TRRSケーブル|1本|

### オプション
以下の部品はオプション品です。
キーボードを光らせたいなどの場合のみ別途購入してください。

|名称|数量|備考|
|----|:---:|----|
|LEDチップ(YS-SK6812MINI-E)|40個|
|OLEDモジュール|2個|
|OLED用ピンソケット|2個|

## 組み立て
* 表面<br>
  ![001](https://user-images.githubusercontent.com/58157342/89107650-781e5900-d46d-11ea-96f6-e60315a7e266.JPG)
* 裏面<br>
  ![002](https://user-images.githubusercontent.com/58157342/89107651-794f8600-d46d-11ea-9983-b0428b0a17e8.JPG)
* 1.Pro Microのはんだ付け
  * チップが載っている面が内側になるようにし、コンスルーピンヘッダを取り付けはんだ付けをしてください。
  * コンスルーピンヘッダには取り付け方向があるため気をつけてください。
  * [コンスルー - Self-Made Keyboards in Japan - ](https://scrapbox.io/self-made-kbds-ja/%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%AB%E3%83%BC)<br>
  ![003](https://user-images.githubusercontent.com/58157342/89108152-21b31980-d471-11ea-9df6-11b106120852.JPG)
* 3.ファームウェアの書き込み
  * [re40_default.hex](https://github.com/kushima8/Re/blob/master/Re40/HEX/re40_default.hex)を指定してファームウェアを書き込んでください。
* 4.LEDチップのはんだ付け(オプション)
  * LEDチップ((YS-SK6812MINI-E)はPCBを裏面にして右上から左下、反転したZ字を書くように実装してください。
  * 高い温度ではんだ付けを行うとLED破損の可能性がありますので、約270℃に設定してはんだ付けをするようにしてください。
  * LEDは足が欠けている箇所が左下に来るように設置し、はんだ付けを行ってください。
  * はんだ付けが完了したら一度Pro Microを取り付け、LEDが光るかどうかテストを行ってください。<br>
  ![004](https://user-images.githubusercontent.com/58157342/89107187-23c5aa00-d46a-11ea-9957-75f56849463f.jpg)
* 5.ダイオードのはんだ付け
  * ダイオードの足を曲げ、PCB前面から取り付け、裏面からはんだ付けを行ってください。
  * ダイオードの向きは前面から見て左(三角形の頂点の先に縦棒がある方)に黒帯が来るように設置しはんだ付けを行ってください。
* 6.Kailh PCB ソケット
  * 中央の穴に干渉しないようにソケットを設置してください。
  * ソケットの片側はんだ付けを行い、基盤から浮いていないようであればもう片方もはんだ付けを行ってください。
* 7.ロータリーエンコーダのはんだ付け
  * ロータリーエンコーダーの取り付け位置は内側と外側の選択式となっております。
  ![005](https://user-images.githubusercontent.com/58157342/89124922-99d31b00-d515-11ea-992a-3565d5d9ceed.JPG)
  * 使用するノブまたは自身の手の大きさなどを考慮し自身で内側か外側かの選択を行ってください。
  * 取り付け位置選択後、PCB表面からロータリーエンコーダを取り付け、裏面からはんだ付けを行ってください。
* 8.タクトスイッチ、TRRSジャックのはんだ付け
  * PCB表面から取り付け、裏面からはんだ付けを行ってください。
* 9.OLEDモジュール、OLED用ピンソケットのはんだ付け(オプション)
  * OLEDモジュールとピンヘッダのハンダ付けを行ってください。
  * ピンソケットをPCB表面から取り付け、裏面からはんだ付けを行ってください。
* 10.トッププレートの取り付け
  * トッププレートの保護フィルムを剥がし、M2 3mmスペーサーをM2 8mmネジで固定してください。
  * その後、PCB表面に取り付け、サンドするようにM2 6mmスペーサーを裏面から取り付けてください。
* 11.保護プレート用スペーサーの取り付け
  * Pro Micro取り付け位置直下に位置する2箇所の穴に裏面からM2 4mmネジを入れ、M2 8mmスペーサーで固定してください。
* 12.ボトムプレートの取り付け
  * ボトムプレートの保護フィルムを剥がし、基板上でロータリーエンコーダの上部に位置する穴に対して裏面からM2 12mmネジを入れ、M2 6mmスペーサーで固定してください。
  * その後、M2 4mmネジ使用し残りの箇所を固定してください。
* 13.Pro Microの取り付け
  * Pro Microを取り付け、キースイッチとロータリーエンコーダの入力の確認を行ってください。
* 14.OLEDモジュールの取り付け(オプション)
  * Pro Microを取り付け、ディスプレイが表示されることの確認を行ってください。
* 15.保護プレートの取り付け
  * ロータリーエンコーダーを内側に取り付けた場合は外側用の、内側に取り付けた場合は外側用の保護プレートを使用します。
  * ロータリーエンコーダー上部に位置する箇所から飛び出ているネジにM2 8mmスペーサーを固定。
  * そして、保護フィルムを剥がし、表面からM2 4mmねじで保護プレートを固定してください。
* 16.ノブの取り付け
  * ノブをロータリーエンコーダーに取り付けてください。
* 17.ゴム足の取り付け
  * ボトムプレートにゴム足を取り付けください。

組み立ての手順は、以上です。
